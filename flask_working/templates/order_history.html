{% extends "base.html" %}
{% block title %}Order History{% endblock %}
{% block content %}
<div class="container mt-5">
  <h3 class="mb-4 text-center">Order History</h3>
  <table class="table table-bordered table-hover">
    <thead class="table-dark">
      <tr>
        <th>Date</th>
        <th>Time</th>
        <th>Stock</th>
        <th>Company</th>
        <th>Type</th>
        <th>Quantity</th>
        <th>Price</th>
        <th>Total Value</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      {% for order in orders %}
      <tr>
        <td>{{ order.createdAt.strftime('%Y-%m-%d') if order.createdAt else 'N/A' }}</td>
        <td>{{ order.createdAt.strftime('%H:%M:%S') if order.createdAt else 'N/A' }}</td>
        <td><strong>{{ order.ticker }}</strong></td>
        <td>{{ order.companyName }}</td>
        <td>
          <span class="badge bg-{{ 'success' if order.type == 'BUY' else 'danger' }}">
            {{ order.type }}
          </span>
        </td>
        <td>{{ order.quantity }}</td>
        <td>${{ "%.2f"|format(order.price) }}</td>
        <td>${{ "%.2f"|format(order.totalValue) }}</td>
        <td>
          <span class="badge bg-{{ 'success' if order.status == 'COMPLETED' else 'warning' }}">
            {{ order.status }}
          </span>
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="9" class="text-center text-muted">
          <i>No orders yet. Start trading to see your history!</i>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  
  {% if orders %}
  <div class="mt-3 text-muted">
    <small>Total Orders: {{ orders|length }}</small>
  </div>
  {% endif %}
</div>
{% endblock %}
